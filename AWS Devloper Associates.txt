AWS Devloper associates:

1.Advantages of Cloud : 

	On demand provisioning of infra 
	Avoid undifferentiated heavy lifting : We can spin up the db in small time interval.
	No Upfront cost .

	This course will help in developing apps ready for the cloud.
Q1.Why AWS : ?
leading client of AWS .
example : Netflix run their services on AWS.

#1 Create AWS account 

meet14764@gmail.com
Gogi@12345

#2 Creating an IAM user.
Identity and access management. This will help in managing the access to the specific AWS resources.
Authentication : Is it the right user.
Authorization : Means if the user have right authorization access to specific resurces.
Root user can do anything.
Now we will create an IAM group named as developer and will create an IAM user and add it to the IAM group .
Then we will use the newly created IAM user to do the stuff.

Steps : To create an IAM group
1. Search for IAM 
2. Left side click on user groups 
3. clikc on create group : enter the name of the group 
4. Select the access as AdministratorAccess 
5. Select finish

steps to create a IAM user user and add it to the above IAM group 
1. Select user from left side
2. click on create user 
3. select : you want to create an iam user 
4. select : you want to create custom password
5. select the group you want the user to add in .
6. Select create user.

Now use this link we copied form the console user page : 
User 1 : 

https://860574603717.signin.aws.amazon.com/console
user name : meet101
password: Gogi@667335424

User 2  : meet102
https://860574603717.signin.aws.amazon.com/console
password: Gogi@667335424


#3 Sevices which can be spin up in different regions based on our requirements.
For example : 
IAM service is a global service.
Compute serices are region specific which means we can switch the region from the console and sping the compute service in that particular region . Or may be we can select the region whihle selecting and cofiguring the service.

Availibility region :------------> Availibility Zones -----------> Data center 


#4 EC2 compute service : 
Elastic computing clould.

1. This is the service which will help to provision a virtual serveres and deploy applications there .
Features of EC2 service : 
	- Will allow user to control the lifecycle of the EC2 instance and it application 
	- Will allow to load balancing and autoscale the instance as per the traffic and utilization 
	- Allows to attach or detach the storage device and allow backup features .
	- Allows network connectivity which will help in creating a microservice architecture in case needed.
	
	
	
Steps to launch an ec2 instanec: 
1. select the ec2 instance 
2. Select the AMI Amazon Machine Image which is the precooked image with all operating system and webserver required.
3. Select the storage to attach
4 Select the security or create the security griup needed as a fireewall.
5. Create a keypair to connect to the instance .
6 Click on launch.

EC2 INstance Types : 

Commands to install tomcat  ;

sudo su
yum update -y
yum install httpd
systemctl start httpd
systemctl enable httpd
echo "Hello World" > /var/www/html/index.html
echo "Hello World : $(whoami)" > /var/www/html/index.html
echo "Hello World : $(hostname)" > /var/www/html/index.html
echo "Hello World : $(ls -ltr)" > /var/www/html/index.html

curl http://169.254.169.254/latest/dynamic/instance-identity/document > /var/www/html/index.html

curl -s http://169.254.169.254/latest/dynamic/instance-identity/document > /var/www/html/index.html -- running the curl in silent mode.

 
curl http://169.254.169.254/latest/meta-data
curl http://169.254.169.254/latest/meta-data/ami-id
curl http://169.254.169.254/latest/meta-data/hostname
curl http://169.254.169.254/latest/meta-data/instance-id
curl http://169.254.169.254/latest/meta-data/instance-type
 
curl http://169.254.169.254/latest/dynamic
curl http://169.254.169.254/latest/dynamic/instance-identity
curl http://169.254.169.254/latest/dynamic/instance-identity/document
 
curl -s http://169.254.169.254/latest/dynamic/instance-identity/document > /var/www/html/index.html
	- 
now you have to update the security group and add an inbound rules to take traffic on port 80 for tomcat to start listen.

#5 EC2 instance metadat service : which is used to get the metadata about the ec2 instance . Like ID type etc
Need to run below curl command from your EC2 instance 
We can do it using : curl http://169.254.169.254/latest/meta-data
curl http://169.254.169.254/latest/meta-data
curl http://169.254.169.254/latest/meta-data/ami-id
curl http://169.254.169.254/latest/meta-data/hostname
curl http://169.254.169.254/latest/meta-data/instance-id
curl http://169.254.169.254/latest/meta-data/instance-type
 
curl -s http://169.254.169.254/latest/meta-data > /var/www/html/index.html

#6 Dynamic data service : to get the dynamic data of the EC2 instance : 
Need to run it from EC2 instance  : 
curl http://169.254.169.254/latest/dynamic
curl http://169.254.169.254/latest/dynamic/instance-identity
curl http://169.254.169.254/latest/dynamic/instance-identity/document


using this url from inside the ec2 instance we can get any object we need  http://169.254.169.254/latest/

To get the user data : 
curl http://169.254.169.254/latest/user-data

#7 JSON Viewer Plugin : you  can install the json viewer plugin in your chrome to format the payload in json .
#8 More on security group : its like a firewall we can change it to allow the data comes into the Ec2 instance or gors out.
	- Default is deny in and our going data.
	- Security groups are stateful means that  : 
		- if the inbound rule is allowed for a specific request then the outgoing response for that request is automacially allowed.
		- if the outbound rule is allowed for a specific request then the incominfg response for that request is automacially allowed.
#9. Understanding the Private and pubic IP address.

Public IP addresses are accessible from the internet 
Private IP addresses are accessible with in the network and not allowed from outside world 
When the EC2 restarted the public ip address changes.

ping command uses ICMP as the protocol. So if you are going to png th EC2 instance you have to open the ICMP port in your security group for ping to 		

Issue : Public ip address will change all the time when a restart occures. 
Note : reboot the ec2 will not change the ip address public one .
Resolution : To Resolve this we use elastic IP address. 
To get the contant ip address.

10. ELASTIC IP ADDRESS : 
We can create an elastic IP address just like we can create a public ip address in azure.

This will keep constant and will act as a link .
Steps create and elastic ip address : 
	a. On left side search for the elastic ip 
	b. Create one .
	c. go to your elastic ip instance and click on action and associate the elastic ip created to the ec2 instance available..

- Can be switched from one ec2 to another ec2 instance.
- Action ---> netwroking -> disassociate 
- Yu will get charged for elastic ip when not used. very big diadvantage.
- you will not be chanrged when elastic ip is associated to an EC2.
- go to elastic ip --> action --> release the elastic ip address.

NOTE POINTS : 
An Elastic IP address doesnâ€™t incur charges as long as all the following conditions are true:

The Elastic IP address is associated with an EC2 instance.

The instance associated with the Elastic IP address is running.

The instance has only one Elastic IP address attached to it.

The Elastic IP address is associated with an attached network interface, such as a Network Load Balancer or NAT gateway.

If you stop/terminate an EC2 instance, do not forget to release the Elastic IP address attached to it.

11. How to create a tomcat server using user-data feature of ec2 instance which act as a bootstrap .

Below steps are used to create a tomcat server .
BOOTSTRAP is nothing but the step in which software is patched and installed at ec2 instance or system start ups.

curl http://169.254.169.254/latest/dynamic/user-data : once you configure the user data you can get that fro ec2 instance inside.

Steps : 
		- Do all the steps for creating the ec2 instance 
		- just on one step you will see the user data field to enter the scipt to add the tomcat server.
		
		When ever you enter the user data script do keep in mind to mention the script language which it is . Like for below itts a bash file.
#!/bin/bash
yum update -y
yum install -y httpd
systemctl start httpd
systemctl enable httpd
curl -s http://169.254.169.254/latest/dynamic/instance-identity/document > /var/www/html/index.html
 One disadvantage of using user data is , if we are installing many software then it will add up the time required to boot up the server. To resolve that we can use custom AMI option 
		

12. Launch template : 

These are are the templates we can wither create it from scratch or from the running instanxe of service EC2.
Its like a snapshot we can create and then use this template to spin up a ec2 instance without entering any configuration points like AMI , linux verion security group etc .

steps : 
	Right click on the ec2 instance 
	Action ---> create template from instance
	Go to launch templates 
	click on the template created 
	then action run instance form the template and done.
	
	
	
 
13. How to create a customized AMI

AMI contains the OS and Soaftware you want on the EC2 instances.

	our AMIs are stored in Amazon s3 bucket on region level.
	So we can run the instance in any AZ in the region .
Steps : 
	This we can create it from the running or stopped EC2 instance .
	Then release an another version of  launch template removing the user data which was in it before because it was in the config of EC2 jisko use krke template bnaya tha and selecting the new AMI i ccreated.
	Select the AMI created.
	Now the AMI itself will have theinstalled softwares needed and ollaaa will time down the boot time with no user data.
	
14. AWS market AMI : AMIS from diff vendor	

AMIs : 
	COpy from one region to other regin . because if we want to use my custom api in other region like tokyo . then we have to copy the Custom api from mumbai to tokyo in order to spin the ec2 .
	We can also make the AMI public : available to all.
	Change the permission . We can search of the account number and add him/her to the AMI persmission 
	
15. EC2 connect key pair : download the pem(RSA) : which is the private key usd for SSH to your instance.

 just open a cmd from the folder where pem key is present 

run command : ssh -i "mykeypairtomcat.pem" ec2-user@ec2-3-111-42-207.ap-south-1.compute.amazonaws.com 

16. In case the private key permission issue is there . Give permission to 0400 to the pem file.
17. For connecting to the windows instance . We need private key and password to RDP.
19. For SSH and RDP to work both the ports should be open in the ec2 instance for the access to work , SSH opens on port 22 and RDP opens on 3389
 note : while connecting on SSH or RDP if we are getting timeout then for sure check your inbound rules on your Ec2 instance.
20. Important EC2 scenarios.
	- When we stopped the EC2 , volume still in use and will charge for it.
	- So for that just terminate the instance to remove the elastic volumes also.
	- We can change the instanvce type by stopping the instance is stopped . can not change the instance if its not stopped.
	- To get the billing for a specific environment , project or business we can use tags for it.
	- To protect your EC2 instance from getting terminate . Just go to instance setting and click "change termination protection" and enable it.
		: then try to terminate the instance . you won't be able to terminate it.
	        : We can also enable it while spinning up or configuration the Ec2 instance.
		: Termination protection will not save Ec2 from termination in below three cases : 
				a. Auto scale group termination means ramp down 
				b. OS shutdown means some one goes into the ec2 and shutdown fro there
				c. spot instance shutdown.
		: We can not change the AMI for the running EC2 instance.
		: We can create the EC2 instance from the template  of VMs running on your on premises . VM import export tool of AWS
		: We can change the scurity group of EC2 anytime.
		: When you get a timeout while connecting to your EC2 instance check the security group values .
		: When the lot of software install using user data is slowing it , we can create an AMI from the running ec2 instance which doesn't have the user data values but all the softwares were already installed on that AMI. That will speed up the process.

21. VPC : virtual private connections : 
A default VPC is already created and it containe the number of subnet equal to the number of availability zones in a Availability region (Mumbai in our case.)
To create a EC2 instance in a spcific AZ select the subnet while selecting rest of the option for ec2 instances.	

22. Billing dashboard : 
	We can check that from the right username option.
	if a normal user is not able to see the dashbaord then we need to login as a root user and give permission for IAM roles and user to ee it.
steps : 
	- Go to your Account in root access 
	- Go to IAM rules and activate the access
